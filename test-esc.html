<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>ESCé”®æµ‹è¯•</title>
    <style>
        body { font-family: system-ui; max-width: 600px; margin: 0 auto; padding: 20px; }
        .test-btn { background: #3b82f6; color: white; border: none; padding: 10px 20px; margin: 10px; border-radius: 6px; cursor: pointer; }
        .status { margin: 10px 0; padding: 10px; border-radius: 4px; }
        .success { background: #dcfce7; color: #166534; }
        .error { background: #fef2f2; color: #dc2626; }
    </style>
</head>
<body>
    <h1>ğŸ”§ ESCé”®åŠŸèƒ½æµ‹è¯•</h1>
    
    <div>
        <h3>æµ‹è¯•æ­¥éª¤ï¼š</h3>
        <ol>
            <li>æŒ‰ <code>Ctrl+Shift+H</code> è¿›å…¥æ£€æŸ¥æ¨¡å¼</li>
            <li>ç‚¹å‡»ä¸‹é¢çš„æŒ‰é’®</li>
            <li>åœ¨å¼¹çª—ä¸­æŒ‰ <code>ESC</code> å…³é—­å¼¹çª—</li>
            <li>å†æ¬¡æŒ‰ <code>ESC</code> é€€å‡ºæ£€æŸ¥æ¨¡å¼</li>
        </ol>
    </div>

    <div>
        <button class="test-btn">æµ‹è¯•æŒ‰é’® 1</button>
        <button class="test-btn">æµ‹è¯•æŒ‰é’® 2</button>
        <button class="test-btn">æµ‹è¯•æŒ‰é’® 3</button>
    </div>

    <div id="status">ç­‰å¾…æµ‹è¯•...</div>

    <script>
        document.addEventListener('keydown', (e) => {
            console.log('é”®ç›˜äº‹ä»¶:', e.key, e.ctrlKey, e.shiftKey);
            
            if (e.ctrlKey && e.shiftKey && e.key === 'H') {
                document.getElementById('status').innerHTML = '<div class="status success">Ctrl+Shift+H æ­£å¸¸å·¥ä½œ</div>';
            }
            
            if (e.key === 'Escape') {
                document.getElementById('status').innerHTML = '<div class="status success">ESCé”®è¢«æ£€æµ‹åˆ° - æ£€æŸ¥æ‰©å±•çŠ¶æ€</div>';
                
                // æ£€æŸ¥æ‰©å±•çŠ¶æ€
                setTimeout(() => {
                    const status = document.getElementById('status');
                    status.innerHTML += '<div class="status">è¯·æ£€æŸ¥æ‰©å±•æ˜¯å¦å·²é€€å‡ºæ£€æŸ¥æ¨¡å¼</div>';
                }, 1000);
            }
        });

        // æ·»åŠ é¡µé¢çŠ¶æ€æ£€æŸ¥
        function checkPageState() {
            const status = document.getElementById('status');
            const hasOverlay = document.querySelector('[style*="z-index: 2147483646"]');
            const hasPopup = document.querySelector('[style*="z-index: 2147483647"]');
            
            if (hasOverlay || hasPopup) {
                status.innerHTML += '<div class="status error">âš ï¸ æ£€æµ‹åˆ°æ‰©å±•UIå…ƒç´ ä»åœ¨é¡µé¢ä¸Š</div>';
            } else {
                status.innerHTML += '<div class="status success">âœ… é¡µé¢çŠ¶æ€æ­£å¸¸ï¼Œæ— æ‰©å±•UIå…ƒç´ </div>';
            }
        }

        // æ¯5ç§’æ£€æŸ¥ä¸€æ¬¡é¡µé¢çŠ¶æ€
        setInterval(checkPageState, 5000);
    </script>
</body>
</html>
