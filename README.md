# 🎨 HoverPrompt - 智能网页样式修改助手

**一句话定位**：点击→高亮→输入需求→生成精准Prompt→复制给Cursor

---

## ✨ 核心功能

### **极简交互流程**
1. **点击插件图标** → 进入"检查模式"
2. **悬停页面元素** → 自动高亮+显示边框+工具提示
3. **点击高亮元素** → 弹出输入框（附当前样式）
4. **输入修改意图** → 例如："背景色改成黄色"
5. **按Enter或点击生成** → 自动复制到剪贴板
6. **粘贴到Cursor** → AI返回精准代码

### **键盘快捷键**
- `Ctrl+Shift+H` - 切换检查模式
- `M` - 切换多选模式
- `Enter` - 生成Prompt
- `Escape` - 退出检查模式

---

## 🎯 生成Prompt示例

### **单选模式**
**用户输入**：
> "背景色改成黄色"

**生成的结构化Prompt**（自动复制）：
```
页面：Hover Prompt 测试页面
URL：http://localhost:3000/test.html

需求：背景色改成黄色

元素选择器：#submit-button

请根据以上信息，帮我修改这个元素的样式或功能。
```

### **多选模式**
**用户输入**：
> "1号元素和2号元素的背景色设置为一样的"

**生成的结构化Prompt**（自动复制）：
```
页面：Hover Prompt 测试页面
URL：http://localhost:3000/test.html

需求：1号元素和2号元素的背景色设置为一样的

已选择的元素（共 2 个）：

元素 1：
选择器：button.btn-primary
样式：background-color: #007bff; color: white; padding: 10px 20px

元素 2：
选择器：button.btn-secondary
样式：background-color: #6c757d; color: white; padding: 10px 20px

请根据以上信息，帮我修改这些元素的样式或功能。你可以使用"1号元素"、"2号元素"等来指代具体的元素。
```

---

## 🎨 UI设计

### **高亮样式**
- **悬停高亮**：蓝色实线边框 + 半透明背景
- **选中高亮**：绿色实线边框 + 半透明背景（单选模式）
- **多选高亮**：多个绿色高亮框同时显示（多选模式）
- 平滑过渡动画
- 智能遮罩效果（其他区域变暗）

### **输入框浮窗**
```
🎨 样式修改助手
描述你想要的效果，按 Enter 生成 Prompt

[当前: background-color: #3b82f6; padding: 10px]

[输入需求...]
例如：让按钮更圆润，增加阴影效果...

[生成 Prompt] [取消]
```

### **智能提示系统**
- ✅ 成功提示：`Prompt 已复制到剪贴板！`
- ⚠️ 警告提示：`请输入修改需求`
- ❌ 错误提示：`复制失败，请手动复制`
- ℹ️ 信息提示：`检查模式已开启，移动鼠标悬停并点击元素 (ESC退出)`

### **工具提示**
悬停时显示元素信息：
```
button#submit-button.btn-primary - "立即注册"
button.btn-disabled - "禁用按钮" [已禁用]
div.overlay - "遮罩层" [无点击事件]
```

### **键盘帮助提示**
右下角显示快捷键提示：
```
键盘快捷键
当前: 单选模式
ESC - 退出检查模式
M - 切换多选模式
Ctrl+Shift+H - 切换检查模式
```

---

## 🚀 技术特性

### **智能元素定位**
- 通过`document.elementFromPoint`获取精准DOM节点
- 生成**稳定CSS选择器**（优先用ID/`data-testid`）
- 自动处理动态元素和复杂嵌套
- **智能处理禁用元素**：自动跳过禁用按钮、`pointer-events:none`等不可交互元素
- **向上查找机制**：当遇到不可选择元素时，自动查找可选择的父元素

### **样式智能提取**
- `getComputedStyle`获取当前样式
- 过滤展示关键属性（颜色/尺寸/边距等）
- 自动格式化CSS代码

### **Prompt优化**
- 包含完整的页面信息（页面标题、URL）
- 结构化的需求描述格式
- 自动补充**上下文**（如所属组件/页面位置）
- 智能约束和指导

---

## 🎯 为什么选择HoverPrompt？

### **对非技术人员友好**
- 只需点击+自然语言描述
- 无需了解CSS语法
- 直观的可视化界面

### **对Cursor AI友好**
- 简洁的Prompt格式
- 完整的元素选择器信息
- 清晰的修改要求

### **对开发者友好**
- 直接拿到可执行代码
- 避免反复确认
- 支持键盘快捷键

---

## 🔧 安装使用

1. **下载扩展**
   - 将项目文件下载到本地
   - 打开Chrome扩展管理页面 (`chrome://extensions/`)
   - 开启"开发者模式"
   - 点击"加载已解压的扩展程序"
   - 选择项目文件夹

2. **开始使用**
   - 在任意网页点击扩展图标
   - 或使用快捷键 `Ctrl+Shift+H`
   - 按照提示操作即可

3. **测试扩展**
   - 确保在HTTP/HTTPS页面上使用（不支持本地文件）
   - 点击扩展图标进入检查模式
   - 悬停元素查看高亮效果
   - 点击元素打开输入框

4. **多选功能使用**
   - 进入检查模式后，按 `M` 键切换到多选模式
   - 点击多个元素进行选择，会显示序号标签
   - 再次点击已选元素可取消选择
   - 输入需求时可以使用"1号元素"、"2号元素"等指代
   - 最多支持选择10个元素

---

## 📝 版本历史

### v0.2.0 (当前版本)
- 🔢 **新增多选功能** - 支持同时选择多个元素并自动编号
- 🏷️ **序号标签显示** - 选中的元素会显示序号标签
- 🎨 **多选高亮显示** - 多选模式下选中元素保持绿色高亮边框
- ⌨️ **M键切换模式** - 按M键在单选/多选模式间切换
- 📝 **多选Prompt生成** - 支持"1号元素"、"2号元素"等指代方式
- 🎨 **增强UI提示** - 弹窗显示当前选择模式和信息
- 🔄 **智能状态管理** - 完善的多选状态管理和清理
- 🚫 **禁用元素支持** - 智能处理禁用按钮和pointer-events:none的元素
- 💡 **状态提示** - 工具提示显示元素状态（已禁用/无点击事件）

### v0.1.1
- ✨ 基础检查模式功能
- 🎨 高亮和遮罩效果
- ⌨️ 键盘快捷键支持
- 💡 智能工具提示
- 🔔 通知系统
- 📋 Prompt生成和复制
- 🌐 自动包含当前页面URL和标题
- 🎯 更结构化的Prompt格式

---

## 🔧 故障排除

### 常见问题

1. **点击图标显示红色错误**
   - 确保在HTTP/HTTPS页面上使用（不支持 `file://` 协议）
   - 检查浏览器控制台是否有错误信息
   - 尝试刷新页面后重新点击扩展图标

2. **扩展无法正常工作**
   - 检查Chrome扩展管理页面是否显示错误
   - 尝试重新加载扩展
   - 确保所有文件都在正确的位置

3. **权限问题**
   - 确保扩展有必要的权限（activeTab, scripting, clipboardWrite）
   - 检查是否被其他扩展或安全软件阻止

### 调试方法

1. **查看控制台日志**
   - 打开开发者工具 (F12)
   - 查看Console标签页
   - 寻找以"HoverPrompt:"开头的日志信息

2. **测试页面**
   - 使用任意HTTP/HTTPS网站进行测试
   - 确保在本地服务器上运行（如 Live Server）

## 🤝 贡献

欢迎提交Issue和Pull Request来改进这个项目！

## 📄 开源协议

本项目采用 [MIT License](LICENSE) 开源协议。

MIT协议是一个宽松的开源协议，允许任何人自由使用、修改和分发代码，同时提供免责声明。

---

**专为前端开发者设计，让样式修改更高效！** 🎨